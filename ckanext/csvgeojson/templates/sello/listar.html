{% extends "page.html" %}

{%  block title  %}Listado de Sellos de Excelencia{% endblock %}

{% block primary_content %}
	</br>
	<div class="row align-items-cente">
		<div class="col-md-12">
			<div class="mb-3">
				<h1 class="mb-4 text-center text-primary fw-bold">
					<i class="bi bi-award-fill text-warning"></i> Sellos de Excelencia
				</h1>
			</div>
		</div>
	</div>
	{% if sellos %}			
		{# <pre>Type: {{ sellos.__class__ }}  Length: {{ sellos|length }} {{ sellos }}<pre>	#}
		{% for sello in sellos %}
			<div class="card shadow-sm mb-3 border-1" style="border: 2px solid orange;">
				<div class="card-body">
					<div class="row align-items-center">
					
						<!-- Información del sello -->
						<div class="col-md-9">
							<h5 class="card-title text-primary mb-2">
							<i class="bi bi-award-fill text-warning"></i><strong>Nombre Postulado:</strong> {{ sello.title }}
							</h5>
							<p class="card-text mb-1"><strong>Descripción:</strong> {{ sello.description or "Sin descripción" }}</p>
							<p class="card-text mb-1"><strong>Dependencia:</strong> {{ sello.dependiencia or "No asignada" }}</p>
							<p class="card-text mb-1"><strong>Fecha de Obtención:</strong> {{ sello.fecha_obtencion or "No registrada" }}</p>
							<p class="card-text mb-1"><strong>Fecha de Vencimiento:</strong> {{ sello.fecha_vencimiento or "No registrada" }}</p>
							<p class="card-text"><strong>Nivel de Calificación:</strong> 
							<span class="badge bg-info text-dark">{{ sello.nivel or "No definido" }}</span>
							</p>
							<p class="card-text mb-1"><strong>Descripción:</strong> {{ sello.description or "Sin descripción" }}</p>
						</div>

						<!-- Imagen + link PDF -->
						<div class="col-md-3 text-center">
							<a href="#">
								<img class="img-fluid rounded mb-2" src="{{ h.url_for_static('/img/sello.png') }}" 
									alt="{{ sello.title }}" style="max-height:100px;">
							</a>
							<br>							
							<div class="d-flex justify-content-center gap-2">
								<a href="{{ sello.pdf_url }}" target="_blank" class="btn btn-sm btn-outline-primary"> Descargar 
									
								</a>
								{% if h.check_access('resource_update', {'id': sello.id}) %}						
									<!-- Botón: Editar -->
									<a href="{{ h.url_for('sello_excelencia.sello_edit', id=sello.id) }}" 
										class="btn btn-sm btn-outline-warning">
										Editar
									</a>
								{% endif %}
								{% if h.check_access('resource_delete', {'id': sello.id}) %}
									<!-- Botón: Eliminar -->
									<form action="{{ h.url_for('sello_excelencia.sello_delete', id=sello.id) }}" method="post">
										<button type="submit" class="btn btn-sm btn-outline-danger"
												onclick="return confirm('¿Seguro que deseas eliminar este recurso?');">
											Eliminar
										</button>
									</form>
								{% endif %}
							</div>
						</div>

					</div>
				</div>
			</div>
			{% endfor %}
	{% else %}
		<p>No hay sellos disponibles.</p>
	{% endif %}
{% endblock %}

{% block secondary_content %}
  {% snippet "snippets/sello/helplers.html", group_type=group_type %}
{% endblock %}

{% block papgination %}
<!-- Paginación -->
<nav aria-label="Page navigation">
  <ul class="pagination justify-content-center">

    <!-- Botón "Anterior" -->
    <li class="page-item {% if page <= 1 %}disabled{% endif %}">
      <a class="page-link" href="?page={{ page-1 }}">Anterior</a>
    </li>

    <!-- Números de página -->
    {% for p in range(1, total_pages+1) %}
      <li class="page-item {% if page == p %}active{% endif %}">
        <a class="page-link" href="?page={{ p }}">{{ p }}</a>
      </li>
    {% endfor %}

    <!-- Botón "Siguiente" -->
    <li class="page-item {% if page >= total_pages %}disabled{% endif %}">
      <a class="page-link" href="?page={{ page+1 }}">Siguiente</a>
    </li>

  </ul>
</nav>
{% endblock %}
